      email=${encodeURIComponent($("#contact-email").val())}
      &subject=${encodeURIComponent($("#contact-subject").val())}
      &message=${encodeURIComponent($("#contact-message").val())}`);$("#contact-email").val("");$("#contact-subject").val("");$("#contact-message").val("");notify("MESSAGE SENT TO AWGE")});$("#contact-send-order-support").click(()=>{if($("#contact-email").val()==""||$("#contact-subject").val()==""||$("#contact-message").val()==""){notify("Fill in all fields");return}fetch(`https://judtgvulg8.execute-api.us-east-1.amazonaws.com/prod/email-support?
      email=${encodeURIComponent($("#contact-email").val())}
      &subject=${encodeURIComponent($("#contact-subject").val())}
      &message=${encodeURIComponent($("#contact-message").val())}`);$("#contact-email").val("");$("#contact-subject").val("");$("#contact-message").val("");notify("MESSAGE SENT TO ORDER SUPPORT")});autosize($("#contact-email"));autosize($("#contact-subject"));autosize($("#contact-message"))}function productLoad(){shopPreloader();$("#product-option-1").click(()=>{changeShopType(1)});$("#product-option-2").click(()=>{changeShopType(2)});$("#product-option-3").click(()=>{changeShopType(3)});$("#product-option-4").click(()=>{changeShopType(4)});$("#product-option-tstng").click(()=>{window.open("https://tstng.co/store.html")});$("#product-item-decrease").click(()=>{advanceProductShot(-1)});$("#product-item-increase").click(()=>{advanceProductShot(1)});$("#product-buy-button").click(()=>{if(shop[currentType][currentItem.index].sizes==null){if(!isOutOfStock(`${shop[currentType][currentItem.index].baseSKU}-OS`)){addToCart()}}else if(!isOutOfStock(`${shop[currentType][currentItem.index].baseSKU}-${currentItem.size}`)){addToCart()}});$("#cart-checkout").click(()=>{cleanCart();if(Object.keys(getCart()).length==0)return;closeModal("cart-modal");openCheckoutLink()});$(".product-items-item").click(()=>{if(shop[currentType][currentItem.index].camera!=null){loadModel(shop[currentType][currentItem.index].filename,shop[currentType][currentItem.index].camera);openModal("model-modal")}const localPrice=shop[currentType][currentItem.index].price=="Sold Out"?"Sold Out":`$${shop[currentType][currentItem.index].price}`;$("#model-price").text(localPrice)});const img=new Image;img.onload=function(){$("#product-item").html("");noise=$("#product-item").noisy({rows:30,img:resolveImgURL(shop[currentType][1].images[0]),ratio:this.height/this.width,id:"#product-item"});window.addEventListener("resize",()=>{noise.updateContainerBounds()});$("#product-item-mobile").css("background-image",resolveImgURL(shop[currentType][1].images[0]));let urlQuery_id=getParameterByName("id");let shopRouteMap={};for(let item in shop[1]){shopRouteMap[shop[1][item].baseSKU]=item}for(let item in shop[2]){shopRouteMap[shop[2][item].baseSKU]=item}if(urlQuery_id!=null){if(shopRouteMap[urlQuery_id]!=null){setShopProduct(shopRouteMap[urlQuery_id])}else{newPage("shop")}}console.debug("Product loaded:",urlQuery_id)};img.src=resolveImgURL(shop[currentType][1].images[0]);hydrateCart()}function resolveImgURL(name){return name}function messageLoad(){$("#message-order-num").text(orderData.num);$("#checkout-close-button").on("click",()=>{localStorage.cart="";newPage("")})}function videosLoad(){buildVideoPlayer();const id=getParameterByName("id");if(videos[id]!=null){openFullscreenVideo(id)}else{}}function picturesLoad(){return}function directedLoad(){buildDirectedPlayer();const id=getParameterByName("id");if(directed[id]!=null){openDirectedVideo(id)}else{}}function awgeDVDVolLoad(){$("#dvd-video").get(0).load()}function toggleVideoPlay(id){if(!$(id).get(0).paused){!$(id).get(0).pause()}else{!$(id).get(0).play()}}function awgeDVDLoad(){$("#dvd-video").on("click",()=>{newPage("home")});$("#awgedvd-vol-1").on("click",()=>{newPage("awgeDVD-vol-1")});$("#awgedvd-vol-2").on("click",()=>{newPage("awgeDVD-vol-2")});$("#awgedvd-vol-3").on("click",()=>{newPage("awgeDVD-vol-3")})}function mediaLoad(){$("#media-videos").click(()=>{newPage("videos")});$("#media-pictures").click(()=>{newPage("pictures")});$("#media-directed").click(()=>{newPage("directed")})}function aboutLoad(){$("#about-artists").click(()=>{newPage("artists")});$("#about-people").click(()=>{newPage("people")})}function artistsLoad(){$(".about-artists-artist").click(function(){newPage(`artist?id=${$(this).attr("for")}`)})}function artistLoad(){const id=getParameterByName("id");if(id==null||id==""||artists[id]==null){newPage("artists");return}const artist=artists[id];let bios="";artist.bio.forEach(elem=>{bios=`${bios}<li>${elem}</li>`});$("#artist-name").html(artist.name);$("#artist-background").css("background-image",`url('${artist.gif}')`);$("#artist-bio").html(bios);$("#artist-img").css("background-image",`url('${artist.img}')`);$("#artist-img").css("background-position",artist.imgPos)}function loadPage(dir,time){$("#awge-content").load(dir,()=>{$("#awge-tube-border").removeClass("awge-tube-border-mobile");switch(dir){case"./pages/landing.html":$("#awge-tube-border").addClass("awge-tube-border-mobile");landingLoad();break;case"./pages/home.html":homeLoad();break;case"./pages/contact.html":contactLoad();break;case"./pages/shop.html":break;case"./pages/shop-metgala.html":break;case"./pages/product.html":productLoad();break;case"./pages/videos.html":videosLoad();break;case"./pages/about.html":aboutLoad();break;case"./pages/sweepstakes.html":break;case"./pages/sweepstakes-rules.html":break;case"./pages/pictures.html":picturesLoad();break;case"./pages/awgeDVD.html":awgeDVDLoad();break;case"./pages/awgeDVD-vol-1.html":awgeDVDVolLoad();break;case"./pages/awgeDVD-vol-2.html":awgeDVDVolLoad();break;case"./pages/awgeDVD-vol-3.html":awgeDVDVolLoad();break;case"./pages/media.html":mediaLoad();break;case"./pages/directed.html":directedLoad();break;case"./pages/artists.html":artistsLoad();break;case"./pages/artist.html":artistLoad();break;default:break}initModal();turnScreenOn(time);initTerms()})}function changePage(dir,time){turnScreenOff(.35);setTimeout(loadPage,350,dir,time)}function buildDirectedPlayer(){for(let i=1;i<Object.keys(directed).length+1;i++){$("#videos-container").prepend(`\
        <div class="videos-listing">\
          <button class="videos-listing-button" onclick="openDirectedVideo(${i})">\
            <img id="video-listing-${i}" onclick="openDirectedVideo(${i})" class="videos-listing-preview" src="${directed[i].gif}" alt="${directed[i].title} video by ${directed[i].desc}"/>\
        </button>\
            <div class="videos-listing-info">\
                <h1>${directed[i].title}</h1>\
                <h4>${directed[i].desc}</h4>\
            </div>\
        </div>\
        `)}}function buildVideoPlayer(){for(let i=1;i<Object.keys(videos).length+1;i++){$("#videos-container").prepend(`\
        <div class="videos-listing">\
          <button class="videos-listing-button" onclick="openFullscreenVideo(${i})">\
            <img id="video-listing-${i}" class="videos-listing-preview" src="${videos[i].gif}" alt="${videos[i].title} video by ${videos[i].desc}"/>\
        </button>\
            <div class="videos-listing-info">\
                <h1>${videos[i].title}</h1>\
                <h4>${videos[i].desc}</h4>\
            </div>\
        </div>\
        `)}}function convertTime(value){value=Math.floor(value);let minutes=Math.floor(value/60);let seconds=value-minutes*60;minutes.toString();seconds.toString();if(minutes<10){minutes=`0${minutes}`}if(seconds<10){seconds=`0${seconds}`}return`${minutes}:${seconds}`}function openDirectedVideo(id){if(directed[id].isVevo){$($(`#video-listing-${id}`).addClass("animate-turn-off"));setTimeout(()=>{$(".videos-content").prepend('            <div class="videos-fullscreen-container">                <button id="awge-back" class="awge-home" style="">                    <img src="https://dwvo2npct47gg.cloudfront.net/gifs/awge-home.gif" alt="Home button spinning globe">                </button>                <iframe class="videos-fullscreen-video" style="margin:10vh 10vw;border:none;width: 80% !important; height: 80% !important;" src="https://embed.vevo.com?isrc=USRV81700927&autoplay=true" allowfullscreen="true">                </iframe>            </div>            ');$("#awge-back").click(()=>{closeFullscreenVideo()})},425)}else{$($(`#video-listing-${id}`).addClass("animate-turn-off"));setTimeout(()=>{$(".videos-content").prepend(`\
            <div class="videos-fullscreen-container">\
                <button id="awge-back" class="awge-home" style="">\
                    <img src="https://dwvo2npct47gg.cloudfront.net/gifs/awge-home.gif" alt="Home button spinning globe">\
                </button>\
                <video id="videos-fullscreen-video" class="videos-fullscreen-video animate-turn-on video-js vjs-default-skin" autoplay loop controls preload="auto" data-setup="{}" poster="${directed[id].gif}">\
                    <source src="${directed[id].link}" type="video/mp4">\
                    <p class="vjs-no-js">\
                      To view this video please enable JavaScript, and consider upgrading to a web browser that\
                      <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>\
                    </p>\
                </video>\
            </div>\
            <script src="https://vjs.zencdn.net/7.0.2/video.js"></script>\
            `);setTimeout(()=>{$("#videos-fullscreen-video").get(0).play()},100);$("#awge-back").click(()=>{closeFullscreenVideo()})},425)}}function openFullscreenVideo(id){if(videos[id].isVevo){$($(`#video-listing-${id}`).addClass("animate-turn-off"));setTimeout(()=>{$(".videos-content").prepend('            <div class="videos-fullscreen-container">                <div id="awge-back" class="awge-home" style="">                    <img src="https://dwvo2npct47gg.cloudfront.net/gifs/awge-home.gif" alt="Home button spinning globe">                </div>                <iframe class="videos-fullscreen-video" style="margin:10vh 10vw;border:none;width: 80% !important; height: 80% !important;" src="https://embed.vevo.com?isrc=USRV81700927&autoplay=true" allowfullscreen="true">                </iframe>            </div>            ');$("#awge-back").click(()=>{closeFullscreenVideo()})},425)}else{$($(`#video-listing-${id}`).addClass("animate-turn-off"));setTimeout(()=>{$(".videos-content").prepend(`\
            <div class="videos-fullscreen-container">\
                <div id="awge-back" class="awge-home" style="">\
                    <img src="https://dwvo2npct47gg.cloudfront.net/gifs/awge-home.gif" alt="Home button spinning globe">\
                </div>\
                <video id="videos-fullscreen-video" class="videos-fullscreen-video animate-turn-on video-js vjs-default-skin" autoplay loop controls preload="auto" data-setup="{}" poster="${videos[id].gif}">\
                    <source src="${videos[id].link}" type="video/mp4">\
                    <p class="vjs-no-js">\
                      To view this video please enable JavaScript, and consider upgrading to a web browser that\
                      <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>\
                    </p>\
                </video>\
            </div>\
            <script src="https://vjs.zencdn.net/7.0.2/video.js"></script>\
            `);$("#awge-back").click(()=>{closeFullscreenVideo()})},425)}}function closeFullscreenVideo(){$(".animate-turn-off").removeClass("animate-turn-off");$(".videos-fullscreen-container").addClass("animate-turn-off");setTimeout(()=>{$(".videos-fullscreen-container").remove()},425)}var currentItem={};var currentType=1;function setShopProduct(index){if(shop[currentType][index]==null){index=1}const price=$("#product-item-price");const name=$("#product-item-name");const description=$("#product-item-description");const progress=$("#product-item-progress");const image=$("#product-item-image");const message=$("#product-items-message");const numItems=Object.keys(shop[currentType]).length;noise.go();startTextGlitch();$("#product-item-mobile").css("background-image",`url(${resolveImgURL(shop[currentType][index].images[0])})`);$("#product-item-mobile").attr("alt",shop[currentType][index].name);setTimeout(()=>{noise.changeImage(resolveImgURL(shop[currentType][index].images[0]),shop[currentType][index].name);$(progress).html(`${index}/${numItems}`).attr("data-text",`${index}/${numItems}`);const localPrice=shop[currentType][index].price=="Sold Out"?"Sold Out":`$${shop[currentType][index].price}`;$(price).html(localPrice).attr("data-text",localPrice).data(localPrice);$(message).html(shop[currentType][index].message);$(image).prop("src",resolveImgURL(shop[currentType][index].images[0]));$(name).html(shop[currentType][index].name).attr("data-text",shop[currentType][index].name).data(shop[currentType][index].name);$(description).html(shop[currentType][index].description).attr("data-text",shop[currentType][index].description).data(shop[currentType][index].description);currentItem.index=index;$("#itemOfInterest").val(shop[currentType][index].name);resetSizes();renderImages();setTimeout(()=>{noise.pause();stopTextGlitch()},400)},400)}function changeShopType(type){setShopProduct(1);resetSizes();const itemsContainer=$(".product-items-container");const typeContainer=$(".product-type-container");$(typeContainer).children().removeClass("product-option-active");$(`.product-option-${type}`).addClass("product-option-active");$(itemsContainer).css("animation",`turn-off${isSafari()?"-safari":""} 0.45s linear forwards`);setTimeout(()=>{currentType=type;setShopProduct(1);resetSizes();$(itemsContainer).css("animation",`turn-on-quick${isSafari()?"-safari":""} 0.65s linear`)},650)}function changeShopPage(offset){const numItems=Object.keys(shop[currentType]).length;let index=parseInt(currentItem.index)+offset;if(index>numItems)index=1;else if(index<1)index=numItems;setShopProduct(index)}function closeSizes(size){const wrapper=$(".product-size-wrapper");const container=$(".product-items-options-middle");$(wrapper).html("");if(size==null){$(wrapper).append('<button onclick="openSizes()" class="product-item-option product-size-button">SIZE</button>');currentItem.size=null}else{$(wrapper).append(`<button onclick="openSizes()" id="product-size-final" class="product-item-option product-size-button">${size}</button>`);currentItem.size=size}updateBuyButton();$(container).css("width","auto");$(container).removeClass("product-items-options-middle-open")}function openSizes(){const wrapper=$(".product-size-wrapper");const container=$(".product-items-options-middle");const{index}=currentItem;const numSizes=Object.keys(shop[currentType][index].sizes).length;$(wrapper).html("");for(let i=0;i<numSizes;i++){const size=shop[currentType][index].sizes[i];const{baseSKU}=shop[currentType][index];if(isOutOfStock(`${baseSKU}-${size}`)){$(wrapper).append(`<button class="product-item-option product-size-option product-size-option-disabled">${size}</button>`)}else{$(wrapper).append(`<button onclick="closeSizes('${size}')" class="product-item-option product-size-option">${size}</button>`)}}$(container).css("width",$(container).width());$(container).animate({width:"100%"},250);$(container).addClass("product-items-options-middle-open")}function resetSizes(){closeSizes();const wrapper=$(".product-size-wrapper");const container=$(".product-items-options-middle");$(wrapper).html("");$(container).removeClass("product-items-options-middle-open");if(shop[currentType][currentItem.index].sizes==null){$(wrapper).css("display","none");currentItem.size="OS";updateBuyButton()}else{$(wrapper).css("display","flex");$(wrapper).append('<button onclick="openSizes()" class="product-item-option product-size-button">SIZE</button>');currentItem.size=null}}$(document).on("click",e=>{const target=$(e.target);const container=$(".product-items-options-middle");if($(container).hasClass("product-items-options-middle-open")){if(!$(target).hasClass("product-items-options-middle")&&!$(target).hasClass("product-size-wrapper")&&!$(target).hasClass("product-item-option")){closeSizes(currentItem.size)}}});function renderImages(){const wrapper=$(".product-sideimages-wrapper");const{index}=currentItem;let numImages=0;$(wrapper).html("");if(shop[currentType][index].images==null){$(wrapper).css("display","none")}else{$(wrapper).css("display","flex");numImages=Object.keys(shop[currentType][index].images).length}for(let i=0;i<numImages;i++){const image=shop[currentType][index].images[i];$(wrapper).append(`<button class="product-sideimages-button" data-imageindex="${i}" onClick=updateProductShot(${i})><div class="product-sideimages-image" style="background-image: url('${resolveImgURL(image)}');"></div></button>`)}}const productShotState={currentShot:0};function updateProductShot(shotIndex){productShotState.currentShot=shotIndex;const newImage=resolveImgURL(shop[currentType][currentItem.index].images[shotIndex]);$("#product-item-mobile").css("background-image",`url(${newImage})`);noise.go();setTimeout(()=>{noise.changeImage(newImage,shop[currentType][currentItem.index].name);$("#product-item-image").prop("src",newImage);setTimeout(()=>{noise.pause()},400)},400)}function advanceProductShot(direction){if(direction!==1&&direction!==-1){console.error("Invalid direction for advanceProductShot");return}let currentShot=productShotState.currentShot;let newIndex=currentShot+direction;const numImages=Object.keys(shop[currentType][currentItem.index].images).length-1;if(newIndex<0){newIndex=numImages}else if(newIndex>numImages){newIndex=0}updateProductShot(newIndex);return newIndex}function getCart(){try{return localStorage.cart==null?{}:JSON.parse(localStorage.cart)}catch(e){console.error(`${"Error Getting Cart - Emptying... "+" :: "}${e}`);localStorage.cart="{}";return JSON.parse(localStorage.cart)}}function cleanCart(){const cart=getCart();if(Object.keys(cart).length==0){return}for(let i=Object.keys(cart).length-1;i>=0;i--){const id=Object.keys(cart)[i];const baseSKU=id.substring(0,id.lastIndexOf("-"));let hasBaseSKU=false;for(let j=1;j<=Object.keys(shop).length;j++){for(let k=1;k<=Object.keys(shop[j]).length;k++){if(shop[j][k].baseSKU==baseSKU){hasBaseSKU=true;break}}}if(!hasBaseSKU){delete cart[id]}}localStorage.cart=JSON.stringify(cart)}function hydrateCart(){cleanCart();const container=$("#cart-container");$(container).html("");const cart=getCart();for(let i=0;i<Object.keys(cart).length;i++){const id=Object.keys(cart)[i];const baseSKU=id.substring(0,id.lastIndexOf("-"));let index=-1;if(cart[id]==0){continue}for(let j=1;j<=Object.keys(shop).length;j++){for(let k=1;k<=Object.keys(shop[j]).length;k++){if(shop[j][k].baseSKU==baseSKU){type=j;index=k;break}}}const item=shop[type][index];const size=id.substring(id.lastIndexOf("-")+1);$(container).append(`<div id=${id} class="cart-item"> \
                        <div class="cart-item-delete-wrapper">\
                            <h1 class="cart-item-delete" onclick="removeFromCart('${id}')">X</h1>\
                        </div>\
                        <div class="cart-item-image" style="background-image: url('${resolveImgURL(item.images[0])}')"></div>\
                        <div class="cart-item-name-wrapper">\
                            <h1 class="cart-item-name" alt="Cart Item Name">${item.name}${size==="OS"?"":` - SZ ${size}`}</h1>\
                        </div>\
                        <div class="cart-item-quantity-wrapper">\
                            <h1 class="cart-item-quantity" alt="Cart Item Quantity">${cart[id]}</h1>\
                        </div>\
                        <div class="cart-item-price-wrapper">\
                            <h1 class="cart-item-price">$${parseFloat(item.price)*parseFloat(cart[id])}</h1>\
                        </div>\
                    </div>`)}if($(container).html()==""){$(container).append('<div class="cart-items-text">YOUR CART IS EMPTY...</div>')}localStorage.cart=JSON.stringify(cart)}function addToCart(){if(currentItem.size==null){console.error("Add to cart failed :: No Size");return}const{baseSKU}=shop[currentType][currentItem.index];const{size}=currentItem;const id=`${baseSKU}-${size}`;const cart=getCart();if(cart[id]==null){cart[id]=0}cart[id]+=1;localStorage.cart=JSON.stringify(cart);hydrateCart();openModal("cart-modal")}function removeFromCart(id){const cart=getCart();delete cart[id];localStorage.cart=JSON.stringify(cart);hydrateCart()}function isOutOfStock(id){if(skuMatch[id]==null){console.debug(`SKU not found: ${id}`);return true}return!skuMatch[id].available}function updateBuyButton(){const buyButton=document.getElementById("product-buy-button");const sizeButton=document.getElementById("product-size-button");buyButton.classList.remove("product-buy-button-disabled");while(sizeButton.classList.contains("product-size-button-disabled")){sizeButton.classList.remove("product-size-button-disabled")}sizeButton.classList.remove("product-size-button-disabled");buyButton.textContent="ADD TO CART";if(!currentItem.index){currentItem.index=1}const item=shop[currentType][currentItem.index];const{sizes}=item;const{baseSKU}=item;if(sizes!==null&&currentItem.size===null){if(currentItem.size!=="OS"){buyButton.classList.add("product-buy-button-disabled")}}if(currentItem.index!=null){if(sizes==null&&isOutOfStock(`${baseSKU}-OS`)){console.debug(`Product is sold out. Index: ${currentItem.index}, Size: ${currentItem.size}`);sizeButton.classList.add("product-size-button-disabled");buyButton.classList.add("product-buy-button-disabled");buyButton.textContent="SOLD OUT"}else if(sizes!=null&&currentItem.size==null){let allOOS=true;for(let i=0;i<sizes.length;i++){const size=sizes[i];if(!isOutOfStock(`${baseSKU}-${size}`)){allOOS=false;break}}if(allOOS){sizeButton.classList.add("product-size-button-disabled");buyButton.classList.add("product-buy-button-disabled");buyButton.textContent="SOLD OUT"}}}}function openCheckoutLink(){const cart=getCart();const lineItems=[];for(let i=0;i<Object.keys(cart).length;i++){let id=Object.keys(cart)[i];let variant=skuMatch[id];lineItems.push({merchandiseId:variant.id,quantity:cart[id]})}console.debug("lineItems",lineItems);const storefront_endpoint="https://awge-2018.myshopify.com/api/2023-10/graphql.json";const storefront_token="c93be35bf35584f666b857f0747fa13d";const query=`
    mutation cartCreate($input: CartInput!) {
      cartCreate(input: $input) {
        cart {
          id
          checkoutUrl
        }
      }
    }
  `;fetch(storefront_endpoint,{method:"POST",headers:{"X-Shopify-Storefront-Access-Token":storefront_token,"Content-Type":"application/json"},body:JSON.stringify({query:query,variables:{input:{lines:lineItems}}})}).then(response=>response.json()).then(data=>{console.debug(data);console.debug("Checkout URL:",data.data.cartCreate.cart.checkoutUrl);localStorage.cart="dicks";hydrateCart();window.location=data.data.cartCreate.cart.checkoutUrl})}function getCartSubtotal(){const cart=getCart();let subtotal=0;for(let i=0;i<Object.keys(cart).length;i++){const id=Object.keys(cart)[i];const type=id.split("-")[0];const index=id.split("-")[1];const item=shop[currentType][type][index];if(item==null){cart[id]=0}subtotal+=parseFloat(item.price)*parseFloat(cart[id])}return subtotal}let checkoutShipping;let checkoutEmail;let orderData;let shopClient;const items=[];var skuMatch={};async function initShopify(){shopClient=ShopifyBuy.buildClient({storefrontAccessToken:"c93be35bf35584f666b857f0747fa13d",domain:"awge-2018.myshopify.com"});shopClient.collection.fetchWithProducts("gid://shopify/Collection/278726443063",{productsFirst:250}).then(collection=>{collection.products.forEach(product=>{product.variants.forEach(variant=>{if(variant.selectedOptions[0].name.toLowerCase()==="size"){skuMatch[`${variant.sku}-${variant.selectedOptions[0].value}`]=variant}else{skuMatch[`${variant.sku}`]=variant}items.push(variant)})});try{updateBuyButton()}catch(exception){console.warn("buy button did not update",exception)}})}let scene;let camera;let renderer;let controls;let object;function initModel(container){const width=window.innerWidth;const height=window.innerHeight;scene=new THREE.Scene;camera=new THREE.PerspectiveCamera(75,width/height,.1,1e3);renderer=new THREE.WebGLRenderer({alpha:true});const loader=new THREE.JSONLoader;renderer.setSize(width,height);renderer.setClearColor(0,0);$(container).append(renderer.domElement);const light=new THREE.AmbientLight(14737632);scene.add(light);camera.position.z=5;controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enablePan=false;window.addEventListener("resize",()=>{const width=window.innerWidth;const height=window.innerHeight;renderer.setSize(width,height);camera.aspect=width/height;camera.updateProjectionMatrix()})}function animateModel(){requestAnimationFrame(animateModel);renderer.render(scene,camera);controls.update()}function setCameraPosition(x,y,z){camera.position.x=x;camera.position.y=y;camera.position.z=z}function animateModelLoading(){let loadText="Loading";let num=($("#model-loading").text().match(/\./g)||[]).length;num+=1;if(num>3)num=1;for(let i=0;i<num;i++){loadText+="."}$("#model-loading").text(loadText)}function showModelLoading(){$("#model-loading").animate({opacity:1},1e3);return setInterval(animateModelLoading,400)}function hideModelLoading(id){$("#model-loading").animate({opacity:0},750);setTimeout(()=>{clearInterval(id)},1e3)}function loadModel(name,settings){const onProgress=function(xhr){if(xhr.lengthComputable){const percentComplete=xhr.loaded/xhr.total*100;console.debug(`${Math.round(percentComplete,2)}% downloaded`)}};const onError=()=>{console.error("Error loading model")};if(object!=null){scene.remove(object)}const loadingID=showModelLoading();const mtlLoader=new THREE.MTLLoader;mtlLoader.setPath("./awge-media/models/");mtlLoader.load(`${name}.mtl`,materials=>{materials.preload();const objLoader=new THREE.OBJLoader;objLoader.setMaterials(materials);objLoader.setPath("https://dwvo2npct47gg.cloudfront.net/models/");objLoader.load(`${name}.obj`,objectOBJ=>{hideModelLoading(loadingID);setTimeout(()=>{object=objectOBJ;object.position.y=0;object.rotation.x=0;setCameraPosition(settings.pos[0],settings.pos[1],settings.pos[2]);controls.minDistance=settings.minDist;controls.maxDistance=settings.maxDist;if(settings.scale)object.scale.set(settings.scale,settings.scale,settings.scale);scene.add(object)},750)},onProgress,onError)})}